# Prompt for an abduco session to attach to

if [ "$ABDUCO" ]
then
	printf 'session already active: %s\n' "$ABDUCO"
	exit 1
fi

name="$(printf '#%s' "$(
	abduco | sed -r 's/(.*)\t(.*)/\2 # \1/'
)" | iomenu -s '#')"

[ "$SSH_CLIENT$SSH_TTY$SSH_CONNECTION" ] && e='^\' || e='^Z'

TERM=screen ABDUCO="$name" exec abduco -e "$e" -A "$name" "$SHELL"
